# 使用 SOPS 加密后提交。以下值为第一个 demo 站点的默认配置。
image:
  web:
    repository: ghcr.io/ellistondow/kubemage-web
    tag: demo-0.1.2
  php:
    repository: ghcr.io/ellistondow/kubemage-php
    tag: demo-0.1.2
  cron:
    repository: ghcr.io/ellistondow/kubemage-cron
    tag: demo-0.1.2

env:
  baseUrl: https://magento.k8s.bdgyoo.com
  mysqlHost: percona.databases.svc.cluster.local
  rabbitmqHost: rabbitmq.messaging.svc.cluster.local
  redisHost: valkey.cache.svc.cluster.local
  mediaBucket: s3://demo-media
  openSearchHost: opensearch.search.svc.cluster.local
  openSearchPort: 9200

remoteStorage:
  driver: aws-s3
  bucket: demo-media
  region: us-east-1
  prefix: media
  endpoint: http://minio.object-storage.svc.cluster.local:9000
  usePathStyle: true

varnish:
  configSecret: ""
  purgeCIDRs:
    - 10.0.0.0/8

consumers:
  enabled: true
  list:
    - name: async-bulk
      queue: async.operations.all
      maxMessages: 1000
    - name: product-attr-update
      queue: product_action_attribute.update
      maxMessages: 500
    - name: product-attr-website
      queue: product_action_attribute.website.update
      maxMessages: 500

ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/proxy-buffer-size: 128k
    nginx.ingress.kubernetes.io/proxy-buffers-number: "16"
  hosts:
    - host: magento.k8s.bdgyoo.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: magento-k8s-bdgyoo-com-tls
      hosts:
        - magento.k8s.bdgyoo.com

redis:
  databases:
    cache: 8
    fpc: 9
    session: 10
    page_cache: 11

secrets:
  mysqlUser: bWFnZW50bw==               # "magento"
  mysqlPassword: TWFnZW50bzIwMjUh       # "Magento2025!"
  mysqlRoot: UGVyY29uYVJvb3QhMjAyNQ==  # "PerconaRoot!2025"
  rabbitmqPassword: bWFnZW50b1Bhc3M=    # "magentoPass"
  redisPassword: cmVkaXNQYXNzMjAyNQ==   # "redisPass2025"
  remoteStorageAccessKey: ZGVtb01lZGlhVXNlcg==
  remoteStorageSecretKey: RGVtb01lZGlhU2VjcmV0MjAyNSE=
